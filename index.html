<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <title>âœ¨ Vibe Nonogram âœ¨</title>
    <style>
        body {
            font-family: system-ui, sans-serif;
            background: #0f1220;
            color: #eaeaf0;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 16px;
            padding: 24px;
        }

        h1 {
            margin: 0;
        }

        .board {
            display: grid;
            grid-template-columns: repeat(6, 40px);
            grid-template-rows: repeat(6, 40px);
            gap: 4px;
        }

        .cell,
        .clue {
            width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 8px;
            font-weight: 600;
        }

        .clue {
            background: #1c2040;
            color: #9aa0ff;
            font-size: 14px;
        }

        .cell {
            background: #2a2f6b;
            cursor: pointer;
            transition: background 0.15s, transform 0.05s;
        }

        .cell:hover {
            transform: scale(1.05);
        }

        .cell.filled {
            background: #ff6ad5;
        }

        .cell.marked {
            background: #1c2040;
            color: #555;
        }

        button {
            background: #ff6ad5;
            border: none;
            padding: 10px 16px;
            border-radius: 10px;
            font-size: 16px;
            cursor: pointer;
        }
    </style>
</head>

<body>
    <h1>ðŸ§© Vibe Nonogram</h1>
    <p>Click = fill ðŸ’– | Rightâ€‘click = mark âœ–</p>


    <div>Choose a game:</div>
    <div>
        <button onclick="loadGame(0)">Game 1</button>
        <button onclick="loadGame(1)">Game 2</button>
        <button onclick="loadGame(2)">Game 3</button>
        <button onclick="loadGame(3)">Game 4</button>
        <button onclick="loadGame(4)">Game 5</button>
    </div>

    <div id="board" class="board"></div>

    <button onclick="checkWin()">Check my vibe</button>

    <script>
        // 5x5 solution (heart-ish vibe) - game 1
        let solution = [
            [0, 1, 1, 1, 0],
            [1, 1, 1, 1, 1],
            [1, 1, 1, 1, 1],
            [0, 1, 1, 1, 0],
            [0, 0, 1, 0, 0]
        ];
        let rowClues = ["3", "5", "5", "3", "1"];
        let colClues = ["2", "4", "5", "4", "2"];

        const games = [
            // â¤ï¸ Heart
            {
                solution: [
                    [0, 1, 1, 1, 0],
                    [1, 1, 1, 1, 1],
                    [1, 1, 1, 1, 1],
                    [0, 1, 1, 1, 0],
                    [0, 0, 1, 0, 0]
                ],
                rowClues: ["3", "5", "5", "3", "1"],
                colClues: ["2", "4", "5", "4", "2"]
            },

            // â­ Star
            {
                solution: [
                    [0, 0, 1, 0, 0],
                    [1, 0, 1, 0, 1],
                    [0, 1, 1, 1, 0],
                    [1, 0, 1, 0, 1],
                    [0, 0, 1, 0, 0]
                ],
                rowClues: ["1", "1 1", "3", "1 1", "1"],
                colClues: ["1 1", "1", "5", "1", "1 1"]
            },

            // ðŸ˜¸ Cat face
            {
                solution: [
                    [1, 0, 0, 0, 1, 1],
                    [1, 1, 0, 1, 1, 1],
                    [0, 1, 1, 1, 0, 1],
                    [1, 0, 1, 0, 1, 1],
                    [0, 1, 1, 1, 0, 1],
                    [0, 1, 1, 1, 0, 1]
                ],
                rowClues: ["1 1", "2 2", "3", "1 1 1", "3", "3"],
                colClues: ["2 1", "2 2", "1 2", "2 2", "2 1", "2"]
            },

            // âž• Plus
            {
                solution: [
                    [0, 0, 1, 0, 0],
                    [0, 0, 1, 0, 0],
                    [1, 1, 1, 1, 1],
                    [0, 0, 1, 0, 0],
                    [0, 0, 1, 0, 0]
                ],
                rowClues: ["1", "1", "5", "1", "1"],
                colClues: ["1", "1", "5", "1", "1"]
            },

            // ðŸŒ™ Moon
            {
                solution: [
                    [0, 1, 1, 0, 0],
                    [1, 1, 1, 0, 0],
                    [1, 1, 1, 0, 0],
                    [1, 1, 1, 0, 0],
                    [0, 1, 1, 0, 0]
                ],
                rowClues: ["2", "3", "3", "3", "2"],
                colClues: ["4", "5", "5", "0", "0"]
            }
        ];

        let state = [];

        function buildGrid() {
            const boardEl = document.getElementById('board');
            boardEl.innerHTML = '';

            const rows = solution.length;
            const cols = solution[0].length;

            // FIX 1: properly scoped state
            state = Array.from({ length: rows }, () => Array(cols).fill(0));

            // FIX 2: update grid size (+1 for clues)
            boardEl.style.gridTemplateColumns = `repeat(${cols + 1}, 40px)`;
            boardEl.style.gridTemplateRows = `repeat(${rows + 1}, 40px)`;

            // build grid with clues
            for (let r = -1; r < rows; r++) {
                for (let c = -1; c < cols; c++) {
                    const div = document.createElement('div');

                    if (r === -1 && c === -1) {
                        div.className = 'clue';
                    }
                    else if (r === -1) {
                        div.className = 'clue';
                        div.textContent = colClues[c] ?? '';
                    }
                    else if (c === -1) {
                        div.className = 'clue';
                        div.textContent = rowClues[r] ?? '';
                    }
                    else {
                        div.className = 'cell';

                        // FIX 3: right-click = force X
                        div.oncontextmenu = e => {
                            e.preventDefault();
                            state[r][c] = state[r][c] === 2 ? 0 : 2;
                            div.classList.toggle('marked');
                            div.classList.remove('filled');
                            div.textContent = state[r][c] === 2 ? 'âœ–' : '';
                        };

                        // left-click cycles
                        div.onclick = () => toggleFill(r, c, div);
                    }

                    boardEl.appendChild(div);
                }
            }
        }


        function loadGame(gameIndex) {
            solution = games[gameIndex].solution;
            rowClues = games[gameIndex].rowClues;
            colClues = games[gameIndex].colClues;
            buildGrid();
        }




        function toggleFill(r, c, el) {
            if (state[r][c] === 2) return;
            state[r][c] = state[r][c] === 1 ? 0 : 1;
            el.classList.toggle('filled');
        }

        function toggleMark(r, c, el) {
            if (state[r][c] === 1) return;
            state[r][c] = state[r][c] === 2 ? 0 : 2;
            el.classList.toggle('marked');
            el.textContent = state[r][c] === 2 ? 'âœ–' : '';
        }

        function checkWin() {
            for (let r = 0; r < 5; r++) {
                for (let c = 0; c < 5; c++) {
                    if (solution[r][c] !== (state[r][c] === 1 ? 1 : 0)) {
                        alert('âŒ Not quiteâ€¦ recalibrate your vibes');
                        return;
                    }
                }
            }
            alert('âœ¨ Perfect vibes! You solved it ðŸ’–');
        }

        loadGame(0);
    </script>
</body>

</html>